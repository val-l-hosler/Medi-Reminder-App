{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\17246\\\\Desktop\\\\Github\\\\Val-l-hosler\\\\React-Medi-App\\\\src\\\\Components\\\\DisplayMedications.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useCallback, forwardRef } from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport * as Yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\"; // Material UI Components\n\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Card from \"@mui/material/Card\";\nimport CardContent from \"@mui/material/CardContent\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport Container from \"@mui/material/Container\";\nimport IconButton from '@mui/material/IconButton';\nimport Typography from \"@mui/material/Typography\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Slide from \"@mui/material/Slide\";\nimport TextField from \"@mui/material/TextField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst doseSuggestions = [{\n  label: \"10\"\n}, {\n  label: \"20\"\n}, {\n  label: \"30\"\n}, {\n  label: \"40\"\n}, {\n  label: \"50\"\n}, {\n  label: \"60\"\n}, {\n  label: \"70\"\n}, {\n  label: \"80\"\n}];\nconst Transition = /*#__PURE__*/forwardRef(_c = function Transition(props, ref) {\n  return /*#__PURE__*/_jsxDEV(Slide, {\n    direction: \"up\",\n    ref: ref,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 12\n  }, this);\n}); // Form validation using Yup\n\n_c2 = Transition;\nconst validationSchema = Yup.object().shape({\n  dose: Yup.string().required(\"Dose is required\")\n});\nexport default function DisplayMedications() {\n  _s();\n\n  // This handles the delete medication confirmation modal\n  const [open, setOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  }; // This handles the update medication modal\n\n\n  const [openUpdate, setOpenUpdate] = useState(false);\n\n  const handleClickOpenUpdate = () => {\n    setOpenUpdate(true);\n  };\n\n  const handleCloseUpdate = () => {\n    setOpenUpdate(false);\n  };\n\n  const {\n    handleSubmit,\n    control,\n    formState\n  } = useForm({\n    mode: \"onChange\",\n    resolver: yupResolver(validationSchema)\n  }); // This handles the delete medication function\n\n  const [state, updateState] = useState(); // I made two force update variables because without it, a warning was showing in the console\n\n  const forceUpdateDelete = useCallback(() => updateState({}), []);\n  const forceUpdateUpdate = useCallback(() => updateState({}), []);\n\n  function deleteMedication(medicationId, parsedMedications) {\n    if (parsedMedications.length > 1) {\n      parsedMedications.splice(medicationId, 1);\n    } else {\n      parsedMedications = [];\n    }\n\n    localStorage.setItem(\"medications\", JSON.stringify(parsedMedications)); // This forces the component to re-render\n\n    forceUpdateDelete(); // This forces the modal to close\n\n    setOpen(false);\n  }\n\n  function updateMedication(medicationId, parsedMedications, data) {\n    parsedMedications[medicationId].dose = data.dose;\n    localStorage.setItem(\"medications\", JSON.stringify(parsedMedications)); // This forces the component to re-render\n\n    forceUpdateUpdate(); // This forces the modal to close\n\n    setOpenUpdate(false);\n  }\n\n  const boxSx = {\n    \"& .MuiTextField-root\": {\n      mb: 5,\n      width: \"100%\"\n    },\n    bgcolor: \"background.paper\",\n    ml: \"50px\",\n    mr: \"50px\"\n  };\n  const buttonSx = {\n    borderRadius: 0,\n    fontSize: \"17px\",\n    height: \"5.75ch\",\n    width: \"50%\"\n  };\n  const cardSx = {\n    bgcolor: \"#eaeef3\",\n    boxShadow: 3,\n    m: 5\n  };\n  const dialogTitleSx = {\n    m: 0,\n    p: 3\n  };\n  const formButtonSx = {\n    borderRadius: 0,\n    fontSize: \"17px\",\n    height: \"5.75ch\",\n    mb: 5,\n    width: \"100%\"\n  };\n  const typographyMedicationSx = {\n    textAlign: \"left\"\n  };\n  const updateDoseTypography = {\n    mb: 5,\n    ml: 5,\n    mr: 5\n  };\n  let medications; // I also set this condition --> localStorage.getItem(\"medications\").length < 2 --> because if the array is empty, the length === 2\n\n  if (localStorage.getItem(\"medications\") !== null && localStorage.getItem(\"medications\").length > 2) {\n    let medicationList = localStorage.getItem(\"medications\");\n    let parsed = JSON.parse(medicationList);\n    medications = parsed.map(medication => {\n      return /*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          sx: cardSx,\n          children: [/*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              sx: typographyMedicationSx,\n              variant: \"h5\",\n              children: [\"Medication: \", medication.medication]\n            }, medication.medication.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              sx: typographyMedicationSx,\n              variant: \"h5\",\n              children: [\"Dose: \", medication.dose, \" mg\"]\n            }, medication.dose.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleClickOpenUpdate,\n              size: \"large\",\n              sx: buttonSx,\n              variant: \"contained\",\n              children: \"Edit Dose\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleClickOpen,\n              color: \"error\",\n              size: \"large\",\n              sx: buttonSx,\n              variant: \"contained\",\n              children: \"Delete Med\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Dialog, {\n            open: open,\n            onClose: handleClose,\n            TransitionComponent: Transition,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              sx: {\n                m: 5\n              },\n              children: \" Are you sure you want to delete the medication? \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => deleteMedication(medication.id, parsed),\n                size: \"large\",\n                sx: buttonSx,\n                variant: \"contained\",\n                children: \"Yes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"error\",\n                size: \"large\",\n                sx: buttonSx,\n                variant: \"contained\",\n                children: \"No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Dialog, {\n            open: openUpdate,\n            onClose: handleCloseUpdate,\n            TransitionComponent: Transition,\n            children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n              sx: dialogTitleSx,\n              children: handleCloseUpdate ? /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"close\",\n                onClick: handleCloseUpdate,\n                sx: {\n                  position: 'absolute',\n                  right: 8,\n                  top: 8,\n                  color: theme => theme.palette.grey[500]\n                },\n                children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit(data => updateMedication(medication.id, parsed, data)),\n              noValidate: true,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                sx: updateDoseTypography,\n                variant: \"h4\",\n                children: \"Update dose\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: boxSx,\n                children: [/*#__PURE__*/_jsxDEV(Controller, {\n                  name: \"dose\",\n                  control: control,\n                  defaultValue: \"\",\n                  render: _ref => {\n                    let {\n                      field: {\n                        ref,\n                        ...field\n                      },\n                      fieldState: {\n                        error\n                      }\n                    } = _ref;\n                    return /*#__PURE__*/_jsxDEV(Autocomplete, { ...field,\n                      autoHighlight: true,\n                      disableClearable: true,\n                      isOptionEqualToValue: (option, value) => option.id === value.id,\n                      id: \"dose-autocomplete\",\n                      onChange: (event, value) => field.onChange(value.label),\n                      options: doseSuggestions,\n                      renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n                        required: true,\n                        error: !!error,\n                        helperText: error === null || error === void 0 ? void 0 : error.message,\n                        id: \"dose\",\n                        label: \"Dose\",\n                        name: \"dose\",\n                        type: \"numeric\",\n                        inputRef: ref,\n                        ...params\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 53\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 45\n                    }, this);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: !formState.isValid,\n                  size: \"large\",\n                  sx: formButtonSx,\n                  type: \"submit\",\n                  variant: \"contained\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)]\n      }, medication.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this);\n    });\n  } else {\n    medications = /*#__PURE__*/_jsxDEV(Card, {\n      sx: cardSx,\n      children: [/*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          sx: typographyMedicationSx,\n          variant: \"h5\",\n          children: \"No medications are registered.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          href: \"/add-medication\",\n          size: \"large\",\n          sx: Object.assign(buttonSx, {\n            width: \"100%\"\n          }),\n          variant: \"contained\",\n          children: \"Register med\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 14\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        flexDirection: \"column\"\n      },\n      children: medications\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DisplayMedications, \"/4782Wl25l+xkkIm9VMRjxj/DK4=\", false, function () {\n  return [useForm];\n});\n\n_c3 = DisplayMedications;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Transition$forwardRef\");\n$RefreshReg$(_c2, \"Transition\");\n$RefreshReg$(_c3, \"DisplayMedications\");","map":{"version":3,"sources":["C:/Users/17246/Desktop/Github/Val-l-hosler/React-Medi-App/src/Components/DisplayMedications.js"],"names":["useState","useCallback","forwardRef","Controller","useForm","Yup","yupResolver","Box","Button","Card","CardContent","CloseIcon","Container","IconButton","Typography","Autocomplete","Dialog","DialogTitle","Slide","TextField","doseSuggestions","label","Transition","props","ref","validationSchema","object","shape","dose","string","required","DisplayMedications","open","setOpen","handleClickOpen","handleClose","openUpdate","setOpenUpdate","handleClickOpenUpdate","handleCloseUpdate","handleSubmit","control","formState","mode","resolver","state","updateState","forceUpdateDelete","forceUpdateUpdate","deleteMedication","medicationId","parsedMedications","length","splice","localStorage","setItem","JSON","stringify","updateMedication","data","boxSx","mb","width","bgcolor","ml","mr","buttonSx","borderRadius","fontSize","height","cardSx","boxShadow","m","dialogTitleSx","p","formButtonSx","typographyMedicationSx","textAlign","updateDoseTypography","medications","getItem","medicationList","parsed","parse","map","medication","id","position","right","top","color","theme","palette","grey","field","fieldState","error","option","value","event","onChange","params","message","isValid","Object","assign","flexDirection"],"mappings":"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","sourcesContent":["import {useState, useCallback, forwardRef} from \"react\";\r\nimport {Controller, useForm} from \"react-hook-form\";\r\nimport * as Yup from \"yup\";\r\nimport {yupResolver} from \"@hookform/resolvers/yup\";\r\n\r\n// Material UI Components\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport Container from \"@mui/material/Container\";\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport Slide from \"@mui/material/Slide\";\r\nimport TextField from \"@mui/material/TextField\";\r\n\r\nconst doseSuggestions = [\r\n    {label: \"10\"},\r\n    {label: \"20\"},\r\n    {label: \"30\"},\r\n    {label: \"40\"},\r\n    {label: \"50\"},\r\n    {label: \"60\"},\r\n    {label: \"70\"},\r\n    {label: \"80\"}\r\n];\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n// Form validation using Yup\r\nconst validationSchema = Yup.object().shape({\r\n    dose: Yup.string()\r\n        .required(\"Dose is required\")\r\n});\r\n\r\nexport default function DisplayMedications() {\r\n    // This handles the delete medication confirmation modal\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    // This handles the update medication modal\r\n    const [openUpdate, setOpenUpdate] = useState(false);\r\n    const handleClickOpenUpdate = () => {\r\n        setOpenUpdate(true);\r\n    };\r\n    const handleCloseUpdate = () => {\r\n        setOpenUpdate(false);\r\n    };\r\n\r\n    const {handleSubmit, control, formState} = useForm({\r\n        mode: \"onChange\",\r\n        resolver: yupResolver(validationSchema)\r\n    });\r\n\r\n    // This handles the delete medication function\r\n    const [state, updateState] = useState();\r\n    // I made two force update variables because without it, a warning was showing in the console\r\n    const forceUpdateDelete = useCallback(() => updateState({}), []);\r\n    const forceUpdateUpdate = useCallback(() => updateState({}), []);\r\n\r\n    function deleteMedication(medicationId, parsedMedications) {\r\n        if (parsedMedications.length > 1) {\r\n            parsedMedications.splice(medicationId, 1);\r\n        } else {\r\n            parsedMedications = [];\r\n        }\r\n\r\n        localStorage.setItem(\"medications\", JSON.stringify(parsedMedications));\r\n\r\n        // This forces the component to re-render\r\n        forceUpdateDelete();\r\n\r\n        // This forces the modal to close\r\n        setOpen(false);\r\n    }\r\n\r\n    function updateMedication(medicationId, parsedMedications, data) {\r\n        parsedMedications[medicationId].dose = data.dose;\r\n        localStorage.setItem(\"medications\", JSON.stringify(parsedMedications));\r\n\r\n        // This forces the component to re-render\r\n        forceUpdateUpdate();\r\n\r\n        // This forces the modal to close\r\n        setOpenUpdate(false);\r\n    }\r\n\r\n    const boxSx = {\r\n        \"& .MuiTextField-root\": {mb: 5, width: \"100%\"},\r\n        bgcolor: \"background.paper\",\r\n        ml: \"50px\",\r\n        mr: \"50px\"\r\n    };\r\n\r\n    const buttonSx = {\r\n        borderRadius: 0,\r\n        fontSize: \"17px\",\r\n        height: \"5.75ch\",\r\n        width: \"50%\"\r\n    };\r\n\r\n    const cardSx = {\r\n        bgcolor: \"#eaeef3\",\r\n        boxShadow: 3,\r\n        m: 5\r\n    };\r\n\r\n    const dialogTitleSx = {\r\n        m: 0,\r\n        p: 3\r\n    };\r\n\r\n    const formButtonSx = {\r\n        borderRadius: 0,\r\n        fontSize: \"17px\",\r\n        height: \"5.75ch\",\r\n        mb: 5,\r\n        width: \"100%\"\r\n    };\r\n\r\n    const typographyMedicationSx = {\r\n        textAlign: \"left\"\r\n    };\r\n\r\n    const updateDoseTypography = {\r\n        mb: 5,\r\n        ml: 5,\r\n        mr: 5\r\n    };\r\n\r\n    let medications;\r\n\r\n    // I also set this condition --> localStorage.getItem(\"medications\").length < 2 --> because if the array is empty, the length === 2\r\n    if (localStorage.getItem(\"medications\") !== null && localStorage.getItem(\"medications\").length > 2) {\r\n        let medicationList = localStorage.getItem(\"medications\");\r\n        let parsed = JSON.parse(medicationList);\r\n\r\n        medications = parsed.map((medication) => {\r\n            return (\r\n                <Box key={medication.id}>\r\n                    <Card sx={cardSx}>\r\n                        <CardContent>\r\n                            <Typography key={medication.medication.id} sx={typographyMedicationSx} variant=\"h5\">\r\n                                Medication: {medication.medication}\r\n                            </Typography>\r\n                            <Typography key={medication.dose.id} sx={typographyMedicationSx} variant=\"h5\">\r\n                                Dose: {medication.dose} mg\r\n                            </Typography>\r\n                        </CardContent>\r\n                        <Box>\r\n                            <Button onClick={handleClickOpenUpdate} size=\"large\" sx={buttonSx} variant=\"contained\">Edit\r\n                                Dose</Button>\r\n                            <Button onClick={handleClickOpen} color=\"error\"\r\n                                    size=\"large\"\r\n                                    sx={buttonSx} variant=\"contained\">Delete\r\n                                Med</Button>\r\n                        </Box>\r\n                    </Card>\r\n\r\n                    {/* Delete medication modal */}\r\n                    <Box>\r\n                        <Dialog\r\n                            open={open}\r\n                            onClose={handleClose}\r\n                            TransitionComponent={Transition}\r\n                        >\r\n                            <Typography variant=\"h5\" sx={{m: 5}}> Are you sure you want to delete the\r\n                                medication? </Typography>\r\n\r\n                            <Box>\r\n                                <Button onClick={() => deleteMedication(medication.id, parsed)} size=\"large\"\r\n                                        sx={buttonSx} variant=\"contained\">Yes</Button>\r\n                                <Button color=\"error\"\r\n                                        size=\"large\"\r\n                                        sx={buttonSx} variant=\"contained\">No</Button>\r\n                            </Box>\r\n                        </Dialog>\r\n                    </Box>\r\n\r\n                    {/* Update medication modal */}\r\n                    <Box>\r\n                        <Dialog\r\n                            open={openUpdate}\r\n                            onClose={handleCloseUpdate}\r\n                            TransitionComponent={Transition}\r\n                        >\r\n                            <DialogTitle sx={dialogTitleSx}>\r\n                                {handleCloseUpdate ? (\r\n                                    <IconButton\r\n                                        aria-label=\"close\"\r\n                                        onClick={handleCloseUpdate}\r\n                                        sx={{\r\n                                            position: 'absolute',\r\n                                            right: 8,\r\n                                            top: 8,\r\n                                            color: (theme) => theme.palette.grey[500],\r\n                                        }}\r\n                                    >\r\n                                        <CloseIcon/>\r\n                                    </IconButton>\r\n                                ) : null}\r\n                            </DialogTitle>\r\n\r\n                            <form onSubmit={handleSubmit((data) => updateMedication(medication.id, parsed, data))}\r\n                                  noValidate>\r\n                                <Typography sx={updateDoseTypography} variant=\"h4\">\r\n                                    Update dose\r\n                                </Typography>\r\n\r\n                                <Box\r\n                                    sx={boxSx}\r\n                                >\r\n                                    <Controller\r\n                                        name=\"dose\"\r\n                                        control={control}\r\n                                        defaultValue={\"\"}\r\n                                        render={({field: {ref, ...field}, fieldState: {error}}) => (\r\n                                            <Autocomplete\r\n                                                {...field}\r\n                                                autoHighlight\r\n                                                disableClearable\r\n                                                isOptionEqualToValue={(option, value) => option.id === value.id}\r\n                                                id=\"dose-autocomplete\"\r\n                                                onChange={(event, value) => field.onChange(value.label)}\r\n                                                options={doseSuggestions}\r\n                                                renderInput={(params) => (\r\n                                                    <TextField\r\n                                                        required\r\n                                                        error={!!error}\r\n                                                        helperText={error?.message}\r\n                                                        id=\"dose\"\r\n                                                        label=\"Dose\"\r\n                                                        name=\"dose\"\r\n                                                        type=\"numeric\"\r\n                                                        inputRef={ref}\r\n                                                        {...params}\r\n                                                    />\r\n                                                )}\r\n                                            />\r\n                                        )}\r\n                                    />\r\n\r\n                                    <Button disabled={!formState.isValid} size=\"large\" sx={formButtonSx} type=\"submit\"\r\n                                            variant=\"contained\">Submit</Button>\r\n                                </Box>\r\n                            </form>\r\n                        </Dialog>\r\n                    </Box>\r\n                </Box>\r\n            )\r\n        });\r\n    } else {\r\n        medications =\r\n            (<Card sx={cardSx}>\r\n                <CardContent>\r\n                    <Typography sx={typographyMedicationSx} variant=\"h5\">\r\n                        No medications are registered.\r\n                    </Typography>\r\n                </CardContent>\r\n                <Box>\r\n                    <Button href=\"/add-medication\" size=\"large\" sx={Object.assign(buttonSx, {width: \"100%\"})}\r\n                            variant=\"contained\">Register\r\n                        med</Button>\r\n                </Box>\r\n            </Card>)\r\n        ;\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Box style={{flexDirection: \"column\"}}>\r\n                {medications}\r\n            </Box>\r\n        </Container>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}